<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="t.dao.UploadFileMapper" >
  
  <select id="getFileNameByInfo" parameterType="java.util.HashMap" resultType="java.util.HashMap" >
    SELECT
	 *
	FROM
	 fileinfo
	WHERE
	 1=1
	 AND file_org_name = #{fileName} 
	 AND file_create_time = #{time}
	 AND file_origin_type = #{type}
	 AND file_size = #{fileSize}
	 AND create_user_id= #{userId}
	 AND is_del = "0"
  </select>
  
  <insert id="insertFileINFO" parameterType="java.util.HashMap" >
    INSERT INTO fileinfo 
    (
	id,
	file_org_name,
	file_new_name,
	file_size,
	file_create_time,
	file_origin_type,
	file_md5,
	create_user_id,
	create_time,
	update_time,
	is_del
	)
	VALUES
	(
		#{id}, 
		#{fileName}, 
		#{SaveName},
		#{fileSize}, 
		#{time},
		#{type},
		"", 
		#{userId}, 
		NOW(),
		NOW(),
		"0"
	)
  </insert>
  
  <update id="deleterFileByInfo" parameterType="java.util.HashMap" >
	UPDATE fileinfo
		SET  is_del = "1"
	WHERE
		1=1
		AND file_org_name = #{fileName} 
		AND file_create_time = #{time}
		AND file_origin_type = #{type}
		AND file_size = #{fileSize}
		AND create_user_id= #{userId}
		AND is_del = "0"
  </update>
  
  <select id="getsaveTypeBySavename" parameterType="java.lang.String" resultType="java.util.HashMap" >
    SELECT
	 *
	FROM
	 fileinfo
	WHERE
	 1=1
	 AND id = #{Savename} 
	 AND is_del = "0"
  </select>
  
</mapper>