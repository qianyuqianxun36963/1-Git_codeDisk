<!DOCTYPE html>
<html>
  <head>
    <title>index_fileUpload.html</title>
	
    <meta name="keywords" content="keyword1,keyword2,keyword3">
    <meta name="description" content="this is my page">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
		<link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css" />
		<link href="../Modules/Library/metronic-4.7/assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
		<link href="../Modules/Library/metronic-4.7/assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
		<!-- END GLOBAL MANDATORY STYLES -->
		<link href="../Modules/Library/metronic-4.7/assets/global/plugins/jstree/dist/themes/default/style.min.css" rel="stylesheet" type="text/css" />
		<link href="../Modules/Library/metronic-4.7/assets/global/plugins/datatables/datatables.min.css" rel="stylesheet" type="text/css" />
		<link href="../Modules/Library/metronic-4.7/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css" rel="stylesheet" type="text/css" />

		<!-- 遮罩层所需CSS -->
		<link href="../Modules/Library/metronic-4.7/assets/global/plugins/bootstrap-modal/css/bootstrap-modal-bs3patch.css" rel="stylesheet" type="text/css" />
        <link href="../Modules/Library/metronic-4.7/assets/global/plugins/bootstrap-modal/css/bootstrap-modal.css" rel="stylesheet" type="text/css" />

		<link href="../Modules/Library/metronic-4.7/assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.css" rel="stylesheet" type="text/css" />
		<!-- BEGIN THEME GLOBAL STYLES -->
		<link href="../Modules/Library/metronic-4.7/assets/global/css/components.min.css" rel="stylesheet" id="style_components" type="text/css" />
		<link href="../Modules/Library/metronic-4.7/assets/global/css/plugins.min.css" rel="stylesheet" type="text/css" />
		<!-- END THEME GLOBAL STYLES -->
		<!-- BEGIN THEME LAYOUT STYLES -->
		<link href="../Modules/Library/metronic-4.7/assets/layouts/layout/css/layout.min.css" rel="stylesheet" type="text/css" />
		
		<link href="../Modules/Library/metronic-4.7/assets/global/plugins/bootstrap-select/css/bootstrap-select.min.css" rel="stylesheet" type="text/css" />
		<!-- 弹出框 -->
		<link href="../Modules/Library/sweetalert/css/sweetalert.css" rel="stylesheet" type="text/css" />
		<!-- END THEME LAYOUT STYLES -->

  </head>
  
  <body>
    <h1>This is fileUpload test page.</h1> <br><hr>
		
		<h3>使用中注意点，可以使用input标签的accept属性指定input接受类型。</h3>
		<a href="http://www.w3school.com.cn/tags/att_input_accept.asp">input标签介绍;&emsp;</a>
		<a href="http://blog.csdn.net/hanshileiai/article/details/44702923">接受excel类型;&emsp;</a>
		<a href="http://blog.csdn.net/lx583274568/article/details/52983693">接受图片类型;&emsp;</a>
		<a href="http://www.runoob.com/tags/att-input-accept.html">接受视频类型</a>
		
		<div class="form-group" id="siteLogoDiv">
			<div class="col-md-4" >
				<div class="col-md-12" id="addLogo" >
                    <div class="fileinput fileinput-new" data-provides="fileinput">
                        <div class="fileinput-new thumbnail" style="width: 200px; height: 150px;">
                            <img src="../Modules/Common/image/common/default.jpg" alt="" id="siteLogo"/> </div>
                        <div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 200px; max-height: 150px;"> </div>
                        <div>
                            <span class="btn default btn-file">
                            <span class="fileinput-new"> choise picture </span>
                            <span class="fileinput-exists"> change picture </span>
                            <input type="file" name="LOGOInp" id="LOGOInp" accept="image/png,image/jpeg" onchange="uploadLOGO('LOGOInp','fileprogress','fileprogressOne','fileprogressTwo')" > </span>
                        </div>
                        
                        <div class="progress"  id="fileprogress" style="display:none;">
              			<div id="fileprogressOne" class="progress-bar" role="progressbar progress-bar-success" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
                  		<div id="fileprogressTwo">0%</div>
                   </div>
              	 </div>
                    </div>
                </div>
			</div>
		</div>
		
		<!-- BEGIN CORE PLUGINS -->
		<script src="../Modules/Library/metronic-4.7/assets/global/plugins/jquery.min.js" type="text/javascript"></script>
		<script src="../Modules/Library/metronic-4.7/assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
		<!-- END CORE PLUGINS -->
		<script src="../Modules/Library/metronic-4.7/assets/global/plugins/bootstrap-select/js/bootstrap-select.min.js" type="text/javascript"></script>
		<!-- BEGIN PAGE LEVEL PLUGINS -->
		<script src="../Modules/Library/metronic-4.7/assets/global/plugins/moment.min.js" type="text/javascript"></script>
		<script src="../Modules/Library/metronic-4.7/assets/global/scripts/app.min.js" type="text/javascript"></script>
		<script src="../Modules/Library/metronic-4.7/assets/global/plugins/morris/morris.min.js" type="text/javascript"></script>
		<script src="../Modules/Library/metronic-4.7/assets/global/plugins/morris/raphael-min.js" type="text/javascript"></script>
		<!-- END PAGE LEVEL PLUGINS -->
		<script src="../Modules/Library/metronic-4.7/assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.js" type="text/javascript"></script>
		<script src="../Modules/Library/metronic-4.7/assets/global/plugins/datatables/datatables.min.js" type="text/javascript"></script>
		<script src="../Modules/Library/metronic-4.7/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js" type="text/javascript"></script>
		<script src="../Modules/Library/metronic-4.7/assets/global/plugins/jstree/dist/jstree.min.js" type="text/javascript"></script>

		<script src="../Modules/Library/metronic-4.7/assets/pages/scripts/components-bootstrap-select.min.js" type="text/javascript"></script>
		
		<!-- 遮罩层所需JS -->
		<script src="../Modules/Library/metronic-4.7/assets/global/plugins/bootstrap-modal/js/bootstrap-modalmanager.js" type="text/javascript"></script>
        <script src="../Modules/Library/metronic-4.7/assets/global/plugins/bootstrap-modal/js/bootstrap-modal.js" type="text/javascript"></script>
		
		<!-- BEGIN 表单判空 -->
		<script src="../Modules/Library/metronic-4.7/assets/global/plugins/jquery-validation/js/jquery.validate.js" type="text/javascript"></script>
		
		<!-- 弹出框 -->
		<script src="../Modules/Library/sweetalert/js/sweetalert.min.js" type="text/javascript"></script>
		<script src="../Modules/Library/sweetalert/js/showAlert.js" type="text/javascript"></script>
		
		<!-- 图片上传 -->
		<script src="../Modules/BizModule/fileupload/js/util/htmlUpload.js" type="text/javascript"></script>
		
		<!-- 遮罩层 -->
		<script src="../Modules/BizModule/fileupload/js/util/maskLayer.js" type="text/javascript"></script>
		
		<!-- 图片预览应对处理 -->
		<script src="../Modules/BizModule/fileupload/js/util/imageLoadUtil.js" type="text/javascript"></script>
		
		<!-- 获取汉字首字母 -->
		<script src="../Modules/BizModule/fileupload/js/util/py.js" type="text/javascript"></script>
		
		<!-- 本页面的业务逻辑 -->
		<script src="../Modules/BizModule/fileupload/js/biz/fileUpload_Index.js" type="text/javascript"></script>
		
		
		<script type="text/javascript">
		/** 图片上传后的相对路径 */
		var  oppositePath = "";

		/** 上传状态 0: 无上传/取消， 1： 上传中， 2： 暂停  ， 3：上传成功 */
		var uploadState = 0;

		function initPage() 
		{
			//重置上传图片的状态
			uploadState = 0;
			
			//重置图片路径
			oppositePath = "";
			
			//初始化文件上传
			$('.fileinput').fileinput('clearImg');
			
			//隐藏进度条
			$("#fileprogress").hide();
		}

		/**
		 * 功能描述：上传图片
		 * 
		 * @Param [String] tagid <input框的id>
		 *
		 * @Param [String] progressBarDivId        <进度条最外层的div的id>
		 * 
		 * @Param [String] progressBarBackgroundId <进度条背景div的id>
		 * 
		 * @Param [String] progressBarNumberId     <进度条数字div的id>
		 * 
		 * @author jixingwang
		 *
		 * @date 2017-3-23 13:53:53
		 */
		function uploadLOGO(tagid,progressBarDivId,progressBarBackgroundId,progressBarNumberId)
		{
			 debugger;
			 $("#"+progressBarDivId).show(); //显示进度条。
			 var fileInfos = getFileInfos(tagid,"0","file");//0代表测试,"file"代表二级目录。
			 uploadFiles(tagid,progressBarDivId,progressBarBackgroundId,progressBarNumberId,fileInfos);
		}
		
		
		</script>
  </body>
</html>
